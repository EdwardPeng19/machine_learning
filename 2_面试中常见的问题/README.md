# 面试中常见的问题

## 1. 金融风控评分卡建模过程

### 1.1 信用风险及基本概念

什么是信用风险<br>

交易对手未能履行约定契约中的义务而造成经济损失的风险,即受信人不能履行还本付息的责任而使授信人的预期收益与实际收益发生偏离的可能性它是金融风险的主要类型

坏样本的定义<br>
 - M3 & M3+ 逾期
 - 债务重组
 - 个人破产
 - 银行主动关户或注销
 - 其他相关违法行为
 
M0,M1,M2的定义<br>
 - M0:最后缴款日的第二天到下一个账单日
 - M1:M0时段的延续,即在未还款的第二个账单日到第二次账单的最后缴款日之间
 - M2:M1的延续,即在未还款的第三个账单日到第三次账单的最后缴款日之间
 
什么是评分卡<br>

以分数的形式来衡量风险几率的一种手段<br>
是对未来一段时间内违约/逾期/失联概率的预测<br>
有一个明确的(正)区间<br>
通常分数越高越安全<br>
数据驱动（搜集数据，对数据研究，建立模型）<br>
反欺诈评分卡(F卡)、申请评分卡(Application)、行为评分卡(Behavior)、催收评分卡(Collection)<br>
 - 反欺诈评分卡、申请评分卡是在贷前准入环节里面
 - 申请评分卡用到的大部分是申请者的背景变量，而且这个模型一般也会比较谨慎
 - 行为评分卡表示申请者已经获准贷款，已经放出贷款以后，根据贷款人的消费习惯，还款情况等一些信用特征，就是跟踪客户合同开始后的表现，来预估用户逾期或者是违约概率
 - 催收评分卡是对已经逾期或者违约的客户，对他进行一个催收评分，严格来讲，有三个模型，还款率模型，账龄滚动模型，失联模型
 
### 1.2 数据准备

 - 数据量，一个优秀的性能模型需要训练数据的数量10倍于该模型中参数的数量
 - 界定这些数据样本的观察期和表现期。观察期是指在设定的观察日之前的一段时间，表现期是指客户观察日之后的一段时间。
 对于信用评分而言，需要用观察期内申请人的信用历史及表现（X），以及表现期内申请人的还款表现（Y），通过模型拟合出X与Y之间的关系
 
### 1.3 数据预处理

 - 处理缺失值和异常值，格式转换(看下时间特征scorecard.py)
 - 变量衍生
 - 分箱（ChiMerge，BestKS）(scorecard.py第三步和scorecard_functions.py)
 - WOE编码(scorecard_functions.py第四步)

ChiMerge：自底向上数据离散化方法。具有最小卡方值的相邻区间合并在一起，直到满足确定的停止准则。<br>
基本思想：对于精确的离散化，相对类频率在一个区间内应当完全一致。因此，如果两个相邻的区间具有非常类似的类分布，
则这两个区间可以合并；否则，他们应当保持分开。而低卡方值表明它们具有相似的类分布。（卡方检验一般用于检验一个样本是否符合预期的一个分布）
(注意：卡方合并的时候如果一个箱都是好/坏样本则需要合并，必须保证所有箱都有好坏样本，为了后续求WOE有意义)

### 1.4 EDA

### 1.5 变量分析与选择

 - 变量挑选的依据
   - 带约束：LASSO(scorecard.py第六步)
   - 特征重要性：随机森林(scorecard.py第六步)
   - 模型拟合优度和复杂度：基于AIC的逐步回归(scorecard.py第六步)
   - 变量信息度：IV(scorecard.py第六步)
   
 - 单变量分析，如 应用统计学方法筛选出预测能力较高的变量，获取自变量中对违约状态影响最显著的指标。经过筛选的变量将进入信用评分模型
   - 变量的显著性（高IV）
   - 变量的分布（分析变量的分布是否大致呈正态分布，才能够满足后续分析的条件）
   - 变量的业务含义
   
 - 多变量分析，如果变量之间相关性显著，会影响模型的预测效果
   - 变量的两两相关性；当相关性高时，保留IV高的或分箱均衡的
   - 变量的多重共线性；通常用VIF来衡量，要求VIF<10，如果VIF超过10则需要逐一剔除解释变量<br>
   ```from statsmodels.stats.outliers_influence import variance_inflation_factor```

### 1.6 评分卡构建（LR模型开发）

 - 逻辑回归是在信用评分卡开发中非常有代表性的模型方法。在这个模型中，经过上述筛选的每一个变量会进行证据权重转换<br>
 - 该步骤主要包括变量分段、变量的WOE（证据权重）变换和逻辑回归估算三部分。

### 1.7 评分卡模型的评价标准

 - 模型的区分度
   - 好/坏人群的分数（或违约概率）的分布差异：KS(scorecard_functions.py)
   - 好/坏人群的分数（或违约概率）的距离：Divergence
   - 好/坏人群浓度的差异：Gini
   
 - 模型的准确度（AUC）
 
 - 模型的稳定性（PSI，通常要求低于25%）
 
 - 从概率到分数（评分卡模型最终产出是分数，且与违约概率呈负相关）

[详细及公式可见csdn课件](https://download.csdn.net/download/quantbaby/10646312)

### 1.8 信用评分

 - 根据逻辑回归的系数和WOE等确定信用评分的方法。将Logistic模型转换为标准评分的形式。

### 1.9 建立评分系统，根据信用评分方法，建立自动信用评分系统。

![信用评分模型开发流程](pic/信用评分模型开发流程.png)<br>
信用评分模型开发流程<br>

## 2. 经典的优化方法
 
 - [梯度下降法](https://zhuanlan.zhihu.com/p/36564434)
 - 牛顿法和拟牛顿法
 - 共轭梯度法(Adagrad, Adadelta, RMSprop, Adam)

## 4. 推导SVM算法

推导看统计学习方法P100

## 5. 推导LR算法

看统计学习方法P78及<br>
[LR推导及代码实现（推荐）](https://zhuanlan.zhihu.com/p/36670444)

## 6. 类别不平衡问题

1. 欠采样 

代表算法：EasyEnsemble<br>
 - 首先通过从多数类中独立随机抽取出若干子集。
 - 将每个子集与少数类数据联合起来训练生成多个基分类器。
 - 最终将这些基分类器组合形成一个集成学习系统。

2. 过采样

代表算法：SMOTE

3. 阈值移动

基于原始训练集进行学习，但在用训练好的分类器进行预测时，
将再缩放的公式y_new/(1-y_new)=y/(1-y)*(m+/m-) 嵌入到决策过程中，称为“阈值移动”。


